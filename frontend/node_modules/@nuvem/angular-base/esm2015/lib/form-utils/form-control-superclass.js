import { NG_VALUE_ACCESSOR } from "@angular/forms";
import { DirectiveSuperclass } from "./directive-superclass";
export function noop() { }
;
/**
 * Use in the `providers` of a component that implements `ControlValueAccessor` to reduce some boilerplate.
 *
 * ```ts
 * @Component({ providers: [provideValueAccessor(MyFormControl)] }
 * class MyFormControl extends BaseFormControl {
 *   // ...
 * }
 * ```
 */
export function provideValueAccessor(type) {
    return {
        provide: NG_VALUE_ACCESSOR,
        useExisting: type,
        multi: true,
    };
}
/**
 * Extend this when creating a form control to reduce some boilerplate. **Warning:** You _must_ include a constructor in your subclass.
 *
 * This example allows 2-way binding to a number via `[(ngModel)]`, `[formControl]`, or any other technique that leverages the `ControlValueAccessor` interface.
 * ```ts
 * @Component({
 *   template: `
 *     <button (click)="increment()" [disabled]="isDisabled">{{ counter }}</button>
 *   `,
 *   providers: [provideValueAccessor(CounterComponent)],
 * })
 * class CounterComponent extends FormControlSuperclass<number> {
 *   counter = 0;
 *
 *   // This looks unnecessary, but is required for Angular to provide `Injector`
 *   constructor(injector: Injector) {
 *     super(injector);
 *   }
 *
 *   handleIncomingValue(value: number) {
 *     this.counter = value;
 *   }
 *
 *   increment() {
 *     this.emitOutgoingValue(++this.counter);
 *     this.onTouched();
 *   }
 * }
 * ```
 */
export class FormControlSuperclass extends DirectiveSuperclass {
    constructor() {
        super(...arguments);
        /** Call this to emit a new value when it changes. */
        this.emitOutgoingValue = noop;
        /** Call this to "commit" a change, traditionally done e.g. on blur. */
        this.onTouched = noop;
        /** You can bind to this in your template as needed. */
        this.isDisabled = false;
    }
    /** Called as angular propagates value changes to this `ControlValueAccessor`. You normally do not need to use it. */
    writeValue(value) {
        this.handleIncomingValue(value);
        this.changeDetectorRef.markForCheck();
    }
    /** Called as angular sets up the binding to this `ControlValueAccessor`. You normally do not need to use it. */
    registerOnChange(fn) {
        this.emitOutgoingValue = fn;
    }
    /** Called as angular sets up the binding to this `ControlValueAccessor`. You normally do not need to use it. */
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    /** Called as angular propagates disabled changes to this `ControlValueAccessor`. You normally do not need to use it. */
    setDisabledState(isDisabled) {
        this.isDisabled = isDisabled;
        this.changeDetectorRef.markForCheck();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1jb250cm9sLXN1cGVyY2xhc3MuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbnV2ZW0vYW5ndWxhci1iYXNlLyIsInNvdXJjZXMiOlsibGliL2Zvcm0tdXRpbHMvZm9ybS1jb250cm9sLXN1cGVyY2xhc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3pFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRTdELE1BQU0sVUFBVSxJQUFJLEtBQUssQ0FBQztBQUFBLENBQUM7QUFFM0I7Ozs7Ozs7OztHQVNHO0FBQ0gsTUFBTSxVQUFVLG9CQUFvQixDQUFDLElBQWU7SUFDaEQsT0FBTztRQUNILE9BQU8sRUFBRSxpQkFBaUI7UUFDMUIsV0FBVyxFQUFFLElBQUk7UUFDakIsS0FBSyxFQUFFLElBQUk7S0FDZCxDQUFDO0FBQ04sQ0FBQztBQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTZCRztBQUNILE1BQU0sT0FBZ0IscUJBQXlCLFNBQVEsbUJBQW1CO0lBQTFFOztRQUVJLHFEQUFxRDtRQUNyRCxzQkFBaUIsR0FBdUIsSUFBSSxDQUFDO1FBRTdDLHVFQUF1RTtRQUN2RSxjQUFTLEdBQUcsSUFBSSxDQUFDO1FBRWpCLHVEQUF1RDtRQUN2RCxlQUFVLEdBQUcsS0FBSyxDQUFDO0lBMEJ2QixDQUFDO0lBckJHLHFIQUFxSDtJQUNySCxVQUFVLENBQUMsS0FBUTtRQUNmLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDMUMsQ0FBQztJQUVELGdIQUFnSDtJQUNoSCxnQkFBZ0IsQ0FBQyxFQUFzQjtRQUNuQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFRCxnSEFBZ0g7SUFDaEgsaUJBQWlCLENBQUMsRUFBZ0I7UUFDOUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELHdIQUF3SDtJQUN4SCxnQkFBZ0IsQ0FBQyxVQUFtQjtRQUNoQyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDMUMsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcbmltcG9ydCB7IERpcmVjdGl2ZVN1cGVyY2xhc3MgfSBmcm9tIFwiLi9kaXJlY3RpdmUtc3VwZXJjbGFzc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfTtcblxuLyoqXG4gKiBVc2UgaW4gdGhlIGBwcm92aWRlcnNgIG9mIGEgY29tcG9uZW50IHRoYXQgaW1wbGVtZW50cyBgQ29udHJvbFZhbHVlQWNjZXNzb3JgIHRvIHJlZHVjZSBzb21lIGJvaWxlcnBsYXRlLlxuICpcbiAqIGBgYHRzXG4gKiBAQ29tcG9uZW50KHsgcHJvdmlkZXJzOiBbcHJvdmlkZVZhbHVlQWNjZXNzb3IoTXlGb3JtQ29udHJvbCldIH1cbiAqIGNsYXNzIE15Rm9ybUNvbnRyb2wgZXh0ZW5kcyBCYXNlRm9ybUNvbnRyb2wge1xuICogICAvLyAuLi5cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvdmlkZVZhbHVlQWNjZXNzb3IodHlwZTogVHlwZTxhbnk+KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgIHVzZUV4aXN0aW5nOiB0eXBlLFxuICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9O1xufVxuXG4vKipcbiAqIEV4dGVuZCB0aGlzIHdoZW4gY3JlYXRpbmcgYSBmb3JtIGNvbnRyb2wgdG8gcmVkdWNlIHNvbWUgYm9pbGVycGxhdGUuICoqV2FybmluZzoqKiBZb3UgX211c3RfIGluY2x1ZGUgYSBjb25zdHJ1Y3RvciBpbiB5b3VyIHN1YmNsYXNzLlxuICpcbiAqIFRoaXMgZXhhbXBsZSBhbGxvd3MgMi13YXkgYmluZGluZyB0byBhIG51bWJlciB2aWEgYFsobmdNb2RlbCldYCwgYFtmb3JtQ29udHJvbF1gLCBvciBhbnkgb3RoZXIgdGVjaG5pcXVlIHRoYXQgbGV2ZXJhZ2VzIHRoZSBgQ29udHJvbFZhbHVlQWNjZXNzb3JgIGludGVyZmFjZS5cbiAqIGBgYHRzXG4gKiBAQ29tcG9uZW50KHtcbiAqICAgdGVtcGxhdGU6IGBcbiAqICAgICA8YnV0dG9uIChjbGljayk9XCJpbmNyZW1lbnQoKVwiIFtkaXNhYmxlZF09XCJpc0Rpc2FibGVkXCI+e3sgY291bnRlciB9fTwvYnV0dG9uPlxuICogICBgLFxuICogICBwcm92aWRlcnM6IFtwcm92aWRlVmFsdWVBY2Nlc3NvcihDb3VudGVyQ29tcG9uZW50KV0sXG4gKiB9KVxuICogY2xhc3MgQ291bnRlckNvbXBvbmVudCBleHRlbmRzIEZvcm1Db250cm9sU3VwZXJjbGFzczxudW1iZXI+IHtcbiAqICAgY291bnRlciA9IDA7XG4gKlxuICogICAvLyBUaGlzIGxvb2tzIHVubmVjZXNzYXJ5LCBidXQgaXMgcmVxdWlyZWQgZm9yIEFuZ3VsYXIgdG8gcHJvdmlkZSBgSW5qZWN0b3JgXG4gKiAgIGNvbnN0cnVjdG9yKGluamVjdG9yOiBJbmplY3Rvcikge1xuICogICAgIHN1cGVyKGluamVjdG9yKTtcbiAqICAgfVxuICpcbiAqICAgaGFuZGxlSW5jb21pbmdWYWx1ZSh2YWx1ZTogbnVtYmVyKSB7XG4gKiAgICAgdGhpcy5jb3VudGVyID0gdmFsdWU7XG4gKiAgIH1cbiAqXG4gKiAgIGluY3JlbWVudCgpIHtcbiAqICAgICB0aGlzLmVtaXRPdXRnb2luZ1ZhbHVlKCsrdGhpcy5jb3VudGVyKTtcbiAqICAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEZvcm1Db250cm9sU3VwZXJjbGFzczxUPiBleHRlbmRzIERpcmVjdGl2ZVN1cGVyY2xhc3NcbiAgICBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcbiAgICAvKiogQ2FsbCB0aGlzIHRvIGVtaXQgYSBuZXcgdmFsdWUgd2hlbiBpdCBjaGFuZ2VzLiAqL1xuICAgIGVtaXRPdXRnb2luZ1ZhbHVlOiAodmFsdWU6IFQpID0+IHZvaWQgPSBub29wO1xuXG4gICAgLyoqIENhbGwgdGhpcyB0byBcImNvbW1pdFwiIGEgY2hhbmdlLCB0cmFkaXRpb25hbGx5IGRvbmUgZS5nLiBvbiBibHVyLiAqL1xuICAgIG9uVG91Y2hlZCA9IG5vb3A7XG5cbiAgICAvKiogWW91IGNhbiBiaW5kIHRvIHRoaXMgaW4geW91ciB0ZW1wbGF0ZSBhcyBuZWVkZWQuICovXG4gICAgaXNEaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgLyoqIEltcGxlbWVudCB0aGlzIHRvIGhhbmRsZSBhIG5ldyB2YWx1ZSBjb21pbmcgaW4gZnJvbSBvdXRzaWRlLiAqL1xuICAgIGFic3RyYWN0IGhhbmRsZUluY29taW5nVmFsdWUodmFsdWU6IFQpOiB2b2lkO1xuXG4gICAgLyoqIENhbGxlZCBhcyBhbmd1bGFyIHByb3BhZ2F0ZXMgdmFsdWUgY2hhbmdlcyB0byB0aGlzIGBDb250cm9sVmFsdWVBY2Nlc3NvcmAuIFlvdSBub3JtYWxseSBkbyBub3QgbmVlZCB0byB1c2UgaXQuICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZTogVCkge1xuICAgICAgICB0aGlzLmhhbmRsZUluY29taW5nVmFsdWUodmFsdWUpO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cblxuICAgIC8qKiBDYWxsZWQgYXMgYW5ndWxhciBzZXRzIHVwIHRoZSBiaW5kaW5nIHRvIHRoaXMgYENvbnRyb2xWYWx1ZUFjY2Vzc29yYC4gWW91IG5vcm1hbGx5IGRvIG5vdCBuZWVkIHRvIHVzZSBpdC4gKi9cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAodmFsdWU6IFQpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5lbWl0T3V0Z29pbmdWYWx1ZSA9IGZuO1xuICAgIH1cblxuICAgIC8qKiBDYWxsZWQgYXMgYW5ndWxhciBzZXRzIHVwIHRoZSBiaW5kaW5nIHRvIHRoaXMgYENvbnRyb2xWYWx1ZUFjY2Vzc29yYC4gWW91IG5vcm1hbGx5IGRvIG5vdCBuZWVkIHRvIHVzZSBpdC4gKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbjogVm9pZEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICAgfVxuXG4gICAgLyoqIENhbGxlZCBhcyBhbmd1bGFyIHByb3BhZ2F0ZXMgZGlzYWJsZWQgY2hhbmdlcyB0byB0aGlzIGBDb250cm9sVmFsdWVBY2Nlc3NvcmAuIFlvdSBub3JtYWxseSBkbyBub3QgbmVlZCB0byB1c2UgaXQuICovXG4gICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuaXNEaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxufVxuIl19