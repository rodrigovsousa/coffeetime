import * as ɵngcc0 from '@angular/core';
var SecurityModule_1;
import { __decorate } from "tslib";
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { LogoutDirective } from './authentication/logout.directive';
import { UserDirective } from './authentication/user.directive';
import { LoginSuccessComponent } from './authentication/login-success.component';
import { HasRoleDirective } from './authentication/authorization/has-role.directive';
import { RouterModule } from '@angular/router';
import { HttpClientModule } from '@angular/common/http';
import { HideWhileLoginComponent } from './authentication/hide-while-login.component';
import { AUTH_CONFIG } from './config/auth-config';
import { AuthorizationService } from './authentication/authorization/authorization.service';
import { AuthenticationService } from './authentication/authentication.service';
import { Authorization } from './authentication/authorization/authorization';
import { Authentication } from './authentication/authentication';
import { NotAuthenticatedErrorProvider } from './authentication/not-authenticated-error-provider.service';
import { ErrorProvider } from '../error/providers/error.provider';
import { HTTP_INTERCEPTORS } from '@angular/common/http';
import { JWTAuthInterceptor } from './token/jwt-auth.interceptor';
import { Token } from './token/token';
import { JWTTokenService } from './token/jwt-token.service';
/**
 * O modulo de segurança contem funcionalidades para autenticação, autorização, redirecionamento
 * para login, gerenciamento de tokens JWT e obtenção e armazenamento de dados de usuário.
 * @class
 */
let SecurityModule = SecurityModule_1 = class SecurityModule {
    /**
     * forRoot method
     * @public
     * @static
     * @returns ModuleWithProviders
     */
    static forRoot(config) {
        return {
            ngModule: SecurityModule_1,
            providers: [
                { provide: AUTH_CONFIG, useValue: config },
                config.tokenStorageIndex ?
                    [
                        { provide: Token, useClass: JWTTokenService },
                        { provide: HTTP_INTERCEPTORS, useClass: JWTAuthInterceptor, multi: true }
                    ] : []
            ]
        };
    }
};
SecurityModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: SecurityModule });
SecurityModule.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function SecurityModule_Factory(t) { return new (t || SecurityModule)(); }, providers: [
        AuthorizationService,
        AuthenticationService,
        { provide: ErrorProvider, useClass: NotAuthenticatedErrorProvider, multi: true },
        { provide: Authorization, useClass: AuthorizationService },
        { provide: Authentication, useClass: AuthenticationService }
    ], imports: [[
            CommonModule,
            RouterModule,
            HttpClientModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SecurityModule, { declarations: function () { return [LogoutDirective,
        UserDirective,
        LoginSuccessComponent,
        HasRoleDirective,
        HideWhileLoginComponent]; }, imports: function () { return [CommonModule,
        RouterModule,
        HttpClientModule]; }, exports: function () { return [LogoutDirective,
        UserDirective,
        LoginSuccessComponent,
        HasRoleDirective,
        HideWhileLoginComponent]; } }); })();
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(SecurityModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule,
                    RouterModule,
                    HttpClientModule
                ],
                declarations: [
                    LogoutDirective,
                    UserDirective,
                    LoginSuccessComponent,
                    HasRoleDirective,
                    HideWhileLoginComponent
                ],
                providers: [
                    AuthorizationService,
                    AuthenticationService,
                    { provide: ErrorProvider, useClass: NotAuthenticatedErrorProvider, multi: true },
                    { provide: Authorization, useClass: AuthorizationService },
                    { provide: Authentication, useClass: AuthenticationService }
                ],
                exports: [
                    LogoutDirective,
                    UserDirective,
                    LoginSuccessComponent,
                    HasRoleDirective,
                    HideWhileLoginComponent
                ]
            }]
    }], null, null); })();
export { SecurityModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjdXJpdHkubW9kdWxlLmpzIiwic291cmNlcyI6WyJuZzovQG51dmVtL2FuZ3VsYXItYmFzZS9saWIvc2VjdXJpdHkvc2VjdXJpdHkubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQXVCLE1BQU0sZUFBZSxDQUFDO0FBQzlELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ2hFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBQ3JGLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN0RixPQUFPLEVBQUUsV0FBVyxFQUFjLE1BQU0sc0JBQXNCLENBQUM7QUFDL0QsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDNUYsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDaEYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBQzdFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUNqRSxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSwyREFBMkQsQ0FBQztBQUMxRyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDbEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDekQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDbEUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0QyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFNUQ7QUFDQTtBQUFpRztBQUNQO0FBQ2pGLEdBQ047QUE2QkgsSUFBYSxjQUFjLHNCQUEzQixNQUFhLGNBQWM7QUFDM0IsSUFDSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFrQjtBQUFJLFFBQ2pDLE9BQU87QUFBRSxZQUNMLFFBQVEsRUFBRSxnQkFBYztBQUFFLFlBQzFCLFNBQVMsRUFBRTtBQUN2QixnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7QUFDMUQsZ0JBQWdCLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQUMsb0JBQ3pCO0FBQUUsd0JBQ0EsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUU7QUFDakUsd0JBQW9CLEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFFBQVEsRUFBRSxrQkFBa0IsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQzdGLHFCQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ3hCLGFBQWE7QUFDYixTQUFTLENBQUM7QUFDVixJQUFJLENBQUM7QUFDTCxDQUNDLENBQUE7QUF0QlksY0FBYyx1Q0E1QjFCLFFBQVEsQ0FBQyxVQUNOO01BQU8sRUFBRSxjQUNMLFlBQVksY0FDWixZQUFZLGNBQ1osZ0JBQWdCLFVBQ25CLFVBQ0QsWUFBWSxFQUFFLGNBQ1Y7T0FBZSxjQUNmO0lBQWEsY0FDYjtRQUFxQixjQUNyQixnQkFBZ0IsY0FDaEIsdUJBQXVCLFVBQzFCO0tBQ0QsU0FBUyxFQUFFLGNBQ1Asb0JBQW9CLGNBQ3BCO2lCQUFxQixjQUNyQixFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFOztRQUE2QixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7V0FDaEYsRUFBRSxPQUFPLEVBQUU7U0FBYSxFQUFFLFFBQVEsRUFBRTtZQUFvQixFQUFFO2FBQzFELEVBQUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUscUJBQXFCLEVBQUUsVUFDL0QsVUFDRCxPQUFPLEVBQUUsY0FDTCxlQUFlLGNBQ2YsYUFBYTtTQUNiO09BQXFCLGNBQ3JCO01BQWdCLGNBQ2hCO2lCQUF1QixVQUMxQixNQUNKLENBQUMsSUFDVyxjQUFjLENBc0IxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFDRDtBQUFDLFNBdkJZLGNBQWM7QUFFM0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IExvZ291dERpcmVjdGl2ZSB9IGZyb20gJy4vYXV0aGVudGljYXRpb24vbG9nb3V0LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBVc2VyRGlyZWN0aXZlIH0gZnJvbSAnLi9hdXRoZW50aWNhdGlvbi91c2VyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBMb2dpblN1Y2Nlc3NDb21wb25lbnQgfSBmcm9tICcuL2F1dGhlbnRpY2F0aW9uL2xvZ2luLXN1Y2Nlc3MuY29tcG9uZW50JztcbmltcG9ydCB7IEhhc1JvbGVEaXJlY3RpdmUgfSBmcm9tICcuL2F1dGhlbnRpY2F0aW9uL2F1dGhvcml6YXRpb24vaGFzLXJvbGUuZGlyZWN0aXZlJztcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBIdHRwQ2xpZW50TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgSGlkZVdoaWxlTG9naW5Db21wb25lbnQgfSBmcm9tICcuL2F1dGhlbnRpY2F0aW9uL2hpZGUtd2hpbGUtbG9naW4uY29tcG9uZW50JztcbmltcG9ydCB7IEFVVEhfQ09ORklHLCBBdXRoQ29uZmlnIH0gZnJvbSAnLi9jb25maWcvYXV0aC1jb25maWcnO1xuaW1wb3J0IHsgQXV0aG9yaXphdGlvblNlcnZpY2UgfSBmcm9tICcuL2F1dGhlbnRpY2F0aW9uL2F1dGhvcml6YXRpb24vYXV0aG9yaXphdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEF1dGhlbnRpY2F0aW9uU2VydmljZSB9IGZyb20gJy4vYXV0aGVudGljYXRpb24vYXV0aGVudGljYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyBBdXRob3JpemF0aW9uIH0gZnJvbSAnLi9hdXRoZW50aWNhdGlvbi9hdXRob3JpemF0aW9uL2F1dGhvcml6YXRpb24nO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb24gfSBmcm9tICcuL2F1dGhlbnRpY2F0aW9uL2F1dGhlbnRpY2F0aW9uJztcbmltcG9ydCB7IE5vdEF1dGhlbnRpY2F0ZWRFcnJvclByb3ZpZGVyIH0gZnJvbSAnLi9hdXRoZW50aWNhdGlvbi9ub3QtYXV0aGVudGljYXRlZC1lcnJvci1wcm92aWRlci5zZXJ2aWNlJztcbmltcG9ydCB7IEVycm9yUHJvdmlkZXIgfSBmcm9tICcuLi9lcnJvci9wcm92aWRlcnMvZXJyb3IucHJvdmlkZXInO1xuaW1wb3J0IHsgSFRUUF9JTlRFUkNFUFRPUlMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBKV1RBdXRoSW50ZXJjZXB0b3IgfSBmcm9tICcuL3Rva2VuL2p3dC1hdXRoLmludGVyY2VwdG9yJztcbmltcG9ydCB7IFRva2VuIH0gZnJvbSAnLi90b2tlbi90b2tlbic7XG5pbXBvcnQgeyBKV1RUb2tlblNlcnZpY2UgfSBmcm9tICcuL3Rva2VuL2p3dC10b2tlbi5zZXJ2aWNlJztcblxuLyoqXG4gKiBPIG1vZHVsbyBkZSBzZWd1cmFuw6dhIGNvbnRlbSBmdW5jaW9uYWxpZGFkZXMgcGFyYSBhdXRlbnRpY2HDp8OjbywgYXV0b3JpemHDp8OjbywgcmVkaXJlY2lvbmFtZW50byBcbiAqIHBhcmEgbG9naW4sIGdlcmVuY2lhbWVudG8gZGUgdG9rZW5zIEpXVCBlIG9idGVuw6fDo28gZSBhcm1hemVuYW1lbnRvIGRlIGRhZG9zIGRlIHVzdcOhcmlvLlxuICogQGNsYXNzXG4gKi9cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIFJvdXRlck1vZHVsZSxcbiAgICAgICAgSHR0cENsaWVudE1vZHVsZVxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIExvZ291dERpcmVjdGl2ZSxcbiAgICAgICAgVXNlckRpcmVjdGl2ZSxcbiAgICAgICAgTG9naW5TdWNjZXNzQ29tcG9uZW50LFxuICAgICAgICBIYXNSb2xlRGlyZWN0aXZlLFxuICAgICAgICBIaWRlV2hpbGVMb2dpbkNvbXBvbmVudFxuICAgIF0sXG4gICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIEF1dGhvcml6YXRpb25TZXJ2aWNlLFxuICAgICAgICBBdXRoZW50aWNhdGlvblNlcnZpY2UsXG4gICAgICAgIHsgcHJvdmlkZTogRXJyb3JQcm92aWRlciwgdXNlQ2xhc3M6IE5vdEF1dGhlbnRpY2F0ZWRFcnJvclByb3ZpZGVyLCBtdWx0aTogdHJ1ZSB9LFxuICAgICAgICB7IHByb3ZpZGU6IEF1dGhvcml6YXRpb24sIHVzZUNsYXNzOiBBdXRob3JpemF0aW9uU2VydmljZSB9LFxuICAgICAgICB7IHByb3ZpZGU6IEF1dGhlbnRpY2F0aW9uLCB1c2VDbGFzczogQXV0aGVudGljYXRpb25TZXJ2aWNlIH1cbiAgICBdLFxuICAgIGV4cG9ydHM6IFtcbiAgICAgICAgTG9nb3V0RGlyZWN0aXZlLFxuICAgICAgICBVc2VyRGlyZWN0aXZlLFxuICAgICAgICBMb2dpblN1Y2Nlc3NDb21wb25lbnQsXG4gICAgICAgIEhhc1JvbGVEaXJlY3RpdmUsXG4gICAgICAgIEhpZGVXaGlsZUxvZ2luQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBTZWN1cml0eU1vZHVsZSB7XG5cbiAgICAvKipcbiAgICAgKiBmb3JSb290IG1ldGhvZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHJldHVybnMgTW9kdWxlV2l0aFByb3ZpZGVyc1xuICAgICAqL1xuICAgIHN0YXRpYyBmb3JSb290KGNvbmZpZzogQXV0aENvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgIG5nTW9kdWxlOiBTZWN1cml0eU1vZHVsZSwgXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IEFVVEhfQ09ORklHLCB1c2VWYWx1ZTogY29uZmlnIH0sXG4gICAgICAgICAgICAgICAgY29uZmlnLnRva2VuU3RvcmFnZUluZGV4ID8gXG4gICAgICAgICAgICAgICAgICBbIFxuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IFRva2VuLCB1c2VDbGFzczogSldUVG9rZW5TZXJ2aWNlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogSFRUUF9JTlRFUkNFUFRPUlMsIHVzZUNsYXNzOiBKV1RBdXRoSW50ZXJjZXB0b3IsIG11bHRpOiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgIF0gOiBbXVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxufVxuIl19