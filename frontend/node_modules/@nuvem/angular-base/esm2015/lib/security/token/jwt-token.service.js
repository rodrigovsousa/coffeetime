var JWTTokenService_1;
import { __decorate, __param } from "tslib";
import { Injectable, Inject } from '@angular/core';
import { HttpHeaders } from "@angular/common/http";
import { Token } from './token';
import { AUTH_CONFIG } from '../config/auth-config';
import * as i0 from "@angular/core";
import * as i1 from "../config/auth-config";
/**
 * Inplementação de serviço JWTTokenService
 * @class
 */
let JWTTokenService = JWTTokenService_1 = class JWTTokenService extends Token {
    /**
     * Metodo construtor responsável por injetar as configurações de autenticação
     * @constructor
     * @param {AuthConfig} config
     */
    constructor(config) {
        super();
        this.config = config;
    }
    /**
     * Metodo responsável pela extração de tokes do heaedrs das requisições
     * @public
     * @param {HttpHeaders} headers
     * @returns string
     */
    extractTokenFromHeaders(headers) {
        return headers.get(JWTTokenService_1.HEADER_STRING);
    }
    /**
     * Metodo responsável pela adição dos tokens no storage
     * @public
     * @param {String} token
     * @returns void
     */
    storeToken(token) {
        this.config.storage.setItem(this.config.tokenStorageIndex, token.toString());
    }
    /**
     * Metodo responsável por injetar token no header das requisições
     * @public
     * @param {HttpRequest<any>} request
     * @returns HttpRequest<any>
     */
    setTokenInHeader(request) {
        const req = request.clone({
            headers: new HttpHeaders({
                [JWTTokenService_1.HEADER_STRING]: this.config.storage.getItem(this.config.tokenStorageIndex)
            })
        });
        return req;
    }
    /**
     * Metodo responsável por verificar a existencia de um token de autenticação
     * @returns boolean
     * @public
     */
    hasToken() {
        return null !== this.config.storage.getItem(this.config.tokenStorageIndex);
    }
};
/**
 * TOKEN_PREFIX  property
 * @type {string}
 */
JWTTokenService.TOKEN_PREFIX = "Bearer";
/**
 * HEADER_STRING property
 * @type {string}
 */
JWTTokenService.HEADER_STRING = "Authorization";
JWTTokenService.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [AUTH_CONFIG,] }] }
];
JWTTokenService.ɵprov = i0.ɵɵdefineInjectable({ factory: function JWTTokenService_Factory() { return new JWTTokenService(i0.ɵɵinject(i1.AUTH_CONFIG)); }, token: JWTTokenService, providedIn: "root" });
JWTTokenService = JWTTokenService_1 = __decorate([
    Injectable({
        providedIn: 'root',
    }),
    __param(0, Inject(AUTH_CONFIG))
], JWTTokenService);
export { JWTTokenService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiand0LXRva2VuLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbnV2ZW0vYW5ndWxhci1iYXNlLyIsInNvdXJjZXMiOlsibGliL3NlY3VyaXR5L3Rva2VuL2p3dC10b2tlbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFlLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDaEMsT0FBTyxFQUFjLFdBQVcsRUFBRSxNQUFNLHVCQUF1QixDQUFDOzs7QUFFaEU7OztHQUdHO0FBSUgsSUFBYSxlQUFlLHVCQUE1QixNQUFhLGVBQWdCLFNBQVEsS0FBSztJQWN0Qzs7OztPQUlHO0lBQ0gsWUFBeUMsTUFBa0I7UUFDdkQsS0FBSyxFQUFFLENBQUM7UUFENkIsV0FBTSxHQUFOLE1BQU0sQ0FBWTtJQUUzRCxDQUFDO0lBQ0Q7Ozs7O09BS0c7SUFDSCx1QkFBdUIsQ0FBQyxPQUFvQjtRQUN4QyxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWUsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxVQUFVLENBQUMsS0FBYTtRQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEVBQzdCLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FDbkIsQ0FBQztJQUNOLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILGdCQUFnQixDQUFDLE9BQXlCO1FBQ3RDLE1BQU0sR0FBRyxHQUFxQixPQUFPLENBQUMsS0FBSyxDQUFDO1lBQ3hDLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsQ0FBQyxpQkFBZSxDQUFDLGFBQWEsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDO2FBQzlGLENBQUM7U0FDTCxDQUFDLENBQUM7UUFDSCxPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsUUFBUTtRQUNKLE9BQU8sSUFBSSxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDL0UsQ0FBQztDQUVKLENBQUE7QUFuRUc7OztHQUdHO0FBQ29CLDRCQUFZLEdBQUcsUUFBUSxDQUFDO0FBRS9DOzs7R0FHRztBQUNvQiw2QkFBYSxHQUFHLGVBQWUsQ0FBQzs7NENBTzFDLE1BQU0sU0FBQyxXQUFXOzs7QUFuQnRCLGVBQWU7SUFIM0IsVUFBVSxDQUFDO1FBQ1IsVUFBVSxFQUFFLE1BQU07S0FDckIsQ0FBQztJQW9CZSxXQUFBLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQTtHQW5CdkIsZUFBZSxDQXFFM0I7U0FyRVksZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cFJlcXVlc3QsIEh0dHBIZWFkZXJzIH0gZnJvbSBcIkBhbmd1bGFyL2NvbW1vbi9odHRwXCI7XG5pbXBvcnQgeyBUb2tlbiB9IGZyb20gJy4vdG9rZW4nO1xuaW1wb3J0IHsgQXV0aENvbmZpZywgQVVUSF9DT05GSUcgfSBmcm9tICcuLi9jb25maWcvYXV0aC1jb25maWcnO1xuXG4vKipcbiAqIElucGxlbWVudGHDp8OjbyBkZSBzZXJ2acOnbyBKV1RUb2tlblNlcnZpY2VcbiAqIEBjbGFzc1xuICovXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxufSlcbmV4cG9ydCBjbGFzcyBKV1RUb2tlblNlcnZpY2UgZXh0ZW5kcyBUb2tlbiB7XG5cbiAgICAvKipcbiAgICAgKiBUT0tFTl9QUkVGSVggIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFRPS0VOX1BSRUZJWCA9IFwiQmVhcmVyXCI7XG5cbiAgICAvKipcbiAgICAgKiBIRUFERVJfU1RSSU5HIHByb3BlcnR5XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEhFQURFUl9TVFJJTkcgPSBcIkF1dGhvcml6YXRpb25cIjtcblxuICAgIC8qKlxuICAgICAqIE1ldG9kbyBjb25zdHJ1dG9yIHJlc3BvbnPDoXZlbCBwb3IgaW5qZXRhciBhcyBjb25maWd1cmHDp8O1ZXMgZGUgYXV0ZW50aWNhw6fDo29cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0F1dGhDb25maWd9IGNvbmZpZ1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKEBJbmplY3QoQVVUSF9DT05GSUcpIHByaXZhdGUgY29uZmlnOiBBdXRoQ29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldG9kbyByZXNwb25zw6F2ZWwgcGVsYSBleHRyYcOnw6NvIGRlIHRva2VzIGRvIGhlYWVkcnMgZGFzIHJlcXVpc2nDp8O1ZXNcbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtIdHRwSGVhZGVyc30gaGVhZGVyc1xuICAgICAqIEByZXR1cm5zIHN0cmluZ1xuICAgICAqL1xuICAgIGV4dHJhY3RUb2tlbkZyb21IZWFkZXJzKGhlYWRlcnM6IEh0dHBIZWFkZXJzKTogU3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlcnMuZ2V0KEpXVFRva2VuU2VydmljZS5IRUFERVJfU1RSSU5HKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNZXRvZG8gcmVzcG9uc8OhdmVsIHBlbGEgYWRpw6fDo28gZG9zIHRva2VucyBubyBzdG9yYWdlXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0b2tlblxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBzdG9yZVRva2VuKHRva2VuOiBTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jb25maWcuc3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgICAgdGhpcy5jb25maWcudG9rZW5TdG9yYWdlSW5kZXgsXG4gICAgICAgICAgICB0b2tlbi50b1N0cmluZygpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0b2RvIHJlc3BvbnPDoXZlbCBwb3IgaW5qZXRhciB0b2tlbiBubyBoZWFkZXIgZGFzIHJlcXVpc2nDp8O1ZXNcbiAgICAgKiBAcHVibGljXG4gICAgICogQHBhcmFtIHtIdHRwUmVxdWVzdDxhbnk+fSByZXF1ZXN0XG4gICAgICogQHJldHVybnMgSHR0cFJlcXVlc3Q8YW55PlxuICAgICAqL1xuICAgIHNldFRva2VuSW5IZWFkZXIocmVxdWVzdDogSHR0cFJlcXVlc3Q8YW55Pik6IEh0dHBSZXF1ZXN0PGFueT4ge1xuICAgICAgICBjb25zdCByZXE6IEh0dHBSZXF1ZXN0PGFueT4gPSByZXF1ZXN0LmNsb25lKHtcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XG4gICAgICAgICAgICAgICAgW0pXVFRva2VuU2VydmljZS5IRUFERVJfU1RSSU5HXTogdGhpcy5jb25maWcuc3RvcmFnZS5nZXRJdGVtKHRoaXMuY29uZmlnLnRva2VuU3RvcmFnZUluZGV4KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0b2RvIHJlc3BvbnPDoXZlbCBwb3IgdmVyaWZpY2FyIGEgZXhpc3RlbmNpYSBkZSB1bSB0b2tlbiBkZSBhdXRlbnRpY2HDp8Ojb1xuICAgICAqIEByZXR1cm5zIGJvb2xlYW5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgaGFzVG9rZW4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmNvbmZpZy5zdG9yYWdlLmdldEl0ZW0odGhpcy5jb25maWcudG9rZW5TdG9yYWdlSW5kZXgpO1xuICAgIH1cblxufVxuXG4iXX0=