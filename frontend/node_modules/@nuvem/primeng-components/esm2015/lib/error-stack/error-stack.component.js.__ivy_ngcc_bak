import { __decorate } from "tslib";
import { Component, Input } from '@angular/core';
import { ErrorStackService, NamedErrorType } from '@nuvem/angular-base';
/**
 * Class ErrorStackComponent
 * @class
 */
let ErrorStackComponent = class ErrorStackComponent {
    /**
     * constructor method
     * @constructor
     * @param {ErrorStackService} errorStack
     */
    constructor(errorStack) {
        this.errorStack = errorStack;
        /**
         * title property
         * @type {string}
         */
        this.title = 'Error Stack';
        /**
         * errors property
         * @type {NamedErrorType}
         */
        this.errors = [];
    }
    /**
     * ngOnInit method
     * @returns void
     */
    ngOnInit() {
        this.errorSubscription = this.errorStack.errors.subscribe((error) => {
            this.errors = [error, ...this.errors];
        });
    }
    /**
     * ngOnDestroy method
     * @returns void
     */
    ngOnDestroy() {
        this.errorSubscription.unsubscribe();
    }
};
ErrorStackComponent.ctorParameters = () => [
    { type: ErrorStackService }
];
__decorate([
    Input()
], ErrorStackComponent.prototype, "title", void 0);
__decorate([
    Input()
], ErrorStackComponent.prototype, "template", void 0);
ErrorStackComponent = __decorate([
    Component({
        selector: 'basis-error-stack',
        template: "<ng-template #defaultTemplate>\n    <div class=\"ui-g\">\n        <div class=\"ui-g-12\">\n            <div class=\"card no-margin\">\n                <h1>{{ title }}</h1>\n                <p-table [value]=\"errors\" [paginator]=\"false\" [rows]=\"5\" first=\"0\">\n                    <ng-template pTemplate=\"header\">\n                        <tr>\n                            <th style=\"width: 20%; text-align: center\">Data</th>\n                            <th style=\"width: 20%; text-align: center\">C\u00F3digo de identifica\u00E7\u00E3o</th>\n                            <th>Mensagem</th>\n                            <th style=\"width: 10%; text-align: center\">A\u00E7\u00E3o</th>\n                        </tr>\n                    </ng-template>\n                    <ng-template pTemplate=\"body\" let-error>\n                        <tr>\n                            <td style=\"width: 20%; text-align: center\">{{error.createdAt|date: 'dd/MM/y H:mm:ss'}}</td>\n                            <td style=\"width: 20%; text-align: center\">{{error.correlationId || 'Indispon\u00EDvel'}}</td>\n                            <td>{{error.message}}</td>\n                            <td style=\"width: 10%; text-align: center\">\n                                <button pButton type=\"button\" pTooltip=\"Copiar erro para \u00E1rea de transfer\u00EAncia\" tooltipPosition=\"left\" class=\"ui-button-primary\" icon=\"ui-icon-content-copy\" [clipboard]=\"error.fullMessage\"></button>\n                            </td>\n                        </tr>\n                    </ng-template>\n                    <ng-template pTemplate=\"emptymessage\" let-columns>\n                        <tr>\n                            <td colspan=\"4\">\n                                Nenhum erro foi registrado at\u00E9 o momento.\n                            </td>\n                        </tr>\n                    </ng-template>\n                </p-table>\n            </div>\n        </div>\n    </div>\n</ng-template>\n<ng-container *ngTemplateOutlet=\"template? template: defaultTemplate\"></ng-container>\n"
    })
], ErrorStackComponent);
export { ErrorStackComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3Itc3RhY2suY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG51dmVtL3ByaW1lbmctY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9lcnJvci1zdGFjay9lcnJvci1zdGFjay5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXFCLEtBQUssRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUVqRixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsY0FBYyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFJeEU7OztHQUdHO0FBS0gsSUFBYSxtQkFBbUIsR0FBaEMsTUFBYSxtQkFBbUI7SUEwQjVCOzs7O09BSUc7SUFDSCxZQUFvQixVQUE2QjtRQUE3QixlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQTdCakQ7OztXQUdHO1FBQ00sVUFBSyxHQUFXLGFBQWEsQ0FBQztRQVF2Qzs7O1dBR0c7UUFDSCxXQUFNLEdBQXFCLEVBQUUsQ0FBQztJQWF1QixDQUFDO0lBRXREOzs7T0FHRztJQUNILFFBQVE7UUFDSixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsS0FBcUIsRUFBRSxFQUFFO1lBQ2hGLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsV0FBVztRQUNQLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0NBQ0osQ0FBQTs7WUFuQm1DLGlCQUFpQjs7QUF6QnhDO0lBQVIsS0FBSyxFQUFFO2tEQUErQjtBQU05QjtJQUFSLEtBQUssRUFBRTtxREFBNEI7QUFaM0IsbUJBQW1CO0lBSi9CLFNBQVMsQ0FBQztRQUNQLFFBQVEsRUFBRSxtQkFBbUI7UUFDN0IsdWtFQUEyQztLQUM5QyxDQUFDO0dBQ1csbUJBQW1CLENBa0QvQjtTQWxEWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgT25EZXN0cm95LCBJbnB1dCwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRXJyb3JTdGFja1NlcnZpY2UsIE5hbWVkRXJyb3JUeXBlIH0gZnJvbSAnQG51dmVtL2FuZ3VsYXItYmFzZSc7XG5cbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIENsYXNzIEVycm9yU3RhY2tDb21wb25lbnRcbiAqIEBjbGFzc1xuICovXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2Jhc2lzLWVycm9yLXN0YWNrJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vZXJyb3Itc3RhY2suY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIEVycm9yU3RhY2tDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG5cbiAgICAvKipcbiAgICAgKiB0aXRsZSBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgQElucHV0KCkgdGl0bGU6IHN0cmluZyA9ICdFcnJvciBTdGFjayc7XG5cbiAgICAvKipcbiAgICAgKiB0ZW1wbGF0ZSBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtUZW1wbGF0ZVJlZn1cbiAgICAgKi9cbiAgICBASW5wdXQoKSB0ZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55PjtcblxuICAgIC8qKlxuICAgICAqIGVycm9ycyBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtOYW1lZEVycm9yVHlwZX1cbiAgICAgKi9cbiAgICBlcnJvcnM6IE5hbWVkRXJyb3JUeXBlW10gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIGVycm9yU3Vic2NyaXB0aW9uIHByb3BlcnR5XG4gICAgICogQHR5cGUge1N1YnNjcmlwdGlvbn1cbiAgICAgKi9cbiAgICBwcml2YXRlIGVycm9yU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgICAvKipcbiAgICAgKiBjb25zdHJ1Y3RvciBtZXRob2RcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0Vycm9yU3RhY2tTZXJ2aWNlfSBlcnJvclN0YWNrXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlcnJvclN0YWNrOiBFcnJvclN0YWNrU2VydmljZSkgeyB9XG5cbiAgICAvKipcbiAgICAgKiBuZ09uSW5pdCBtZXRob2RcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpcHRpb24gPSB0aGlzLmVycm9yU3RhY2suZXJyb3JzLnN1YnNjcmliZSgoZXJyb3I6IE5hbWVkRXJyb3JUeXBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVycm9ycyA9IFtlcnJvciwgLi4udGhpcy5lcnJvcnNdO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBuZ09uRGVzdHJveSBtZXRob2RcbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG59XG4iXX0=