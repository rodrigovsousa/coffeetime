import { __decorate, __extends } from "tslib";
import { Component, Input, Output, EventEmitter } from "@angular/core";
import { provideValueAccessor } from "@nuvem/angular-base";
import { FieldComponent } from "../field.component";
var DropdownComponent = /** @class */ (function (_super) {
    __extends(DropdownComponent, _super);
    function DropdownComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.virtualScroll = false;
        _this.filter = false;
        _this.itemSize = 30;
        _this.options = [];
        _this.onChange = new EventEmitter();
        return _this;
    }
    DropdownComponent_1 = DropdownComponent;
    DropdownComponent.prototype.ngOnInit = function () {
        var _this = this;
        _super.prototype.ngOnInit.call(this);
        if (this.service) {
            this.service.findAll(null).subscribe(function (data) {
                _this.options = data;
            });
        }
    };
    DropdownComponent.prototype.onChangeEvent = function (event) {
        this.onChange.emit(event);
    };
    DropdownComponent.prototype.outerToInner = function (value) {
        var _this = this;
        if (value && value.id) {
            this.service.find(value.id).subscribe(function (data) {
                _this.formControl.setValue(data);
            });
        }
        return value;
    };
    var DropdownComponent_1;
    __decorate([
        Input()
    ], DropdownComponent.prototype, "optionLabel", void 0);
    __decorate([
        Input()
    ], DropdownComponent.prototype, "virtualScroll", void 0);
    __decorate([
        Input()
    ], DropdownComponent.prototype, "filter", void 0);
    __decorate([
        Input()
    ], DropdownComponent.prototype, "itemSize", void 0);
    __decorate([
        Input()
    ], DropdownComponent.prototype, "service", void 0);
    __decorate([
        Input()
    ], DropdownComponent.prototype, "options", void 0);
    __decorate([
        Output()
    ], DropdownComponent.prototype, "onChange", void 0);
    DropdownComponent = DropdownComponent_1 = __decorate([
        Component({
            selector: "[nDropdown]",
            template: "<span #notification form-notification class=\"md-inputfield custom-select\" [name]=\"name\" [form]=\"form\">\n    <p-dropdown #input\n        [formControl]=\"formControl\"\n        [optionLabel]=\"optionLabel\"\n        [options]=\"options\"\n        [filter]=\"filter\"\n        [virtualScroll]=\"virtualScroll\"\n        [itemSize]=\"itemSize\"\n        (onChange)=\"onChangeEvent($event)\">\n    </p-dropdown>\n    <label [for]=\"name\" [innerHTML]=\"label\"></label>\n    <nValidationMessage [control]=\"formControl\" *ngIf=\"!notification.message\"></nValidationMessage>\n    <ng-content></ng-content>\n</span>\n",
            providers: [provideValueAccessor(DropdownComponent_1)]
        })
    ], DropdownComponent);
    return DropdownComponent;
}(FieldComponent));
export { DropdownComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJvcGRvd24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG51dmVtL3ByaW1lbmctY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jcnVkL2NvbXBvbmVudHMvZHJvcGRvd24vZHJvcGRvd24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBaUIsTUFBTSxFQUFFLFlBQVksRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUM5RixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFRcEQ7SUFBdUMscUNBQW1CO0lBQTFEO1FBQUEscUVBdUNDO1FBbkNZLG1CQUFhLEdBQUcsS0FBSyxDQUFDO1FBRXRCLFlBQU0sR0FBRyxLQUFLLENBQUM7UUFFZixjQUFRLEdBQUcsRUFBRSxDQUFDO1FBSWQsYUFBTyxHQUFVLEVBQUUsQ0FBQztRQUVuQixjQUFRLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7O0lBeUJwRSxDQUFDOzBCQXZDWSxpQkFBaUI7SUFnQjFCLG9DQUFRLEdBQVI7UUFBQSxpQkFRQztRQVBHLGlCQUFNLFFBQVEsV0FBRSxDQUFDO1FBRWpCLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNkLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFBLElBQUk7Z0JBQ3JDLEtBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3hCLENBQUMsQ0FBQyxDQUFDO1NBQ047SUFDTCxDQUFDO0lBRUQseUNBQWEsR0FBYixVQUFjLEtBQUs7UUFDZixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRVMsd0NBQVksR0FBdEIsVUFBdUIsS0FBVTtRQUFqQyxpQkFPQztRQU5HLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxFQUFFLEVBQUU7WUFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFDLElBQUk7Z0JBQ3ZDLEtBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BDLENBQUMsQ0FBQyxDQUFDO1NBQ047UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDOztJQW5DUTtRQUFSLEtBQUssRUFBRTswREFBcUI7SUFFcEI7UUFBUixLQUFLLEVBQUU7NERBQXVCO0lBRXRCO1FBQVIsS0FBSyxFQUFFO3FEQUFnQjtJQUVmO1FBQVIsS0FBSyxFQUFFO3VEQUFlO0lBRWQ7UUFBUixLQUFLLEVBQUU7c0RBQWdDO0lBRS9CO1FBQVIsS0FBSyxFQUFFO3NEQUFxQjtJQUVuQjtRQUFULE1BQU0sRUFBRTt1REFBdUQ7SUFkdkQsaUJBQWlCO1FBTDdCLFNBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxhQUFhO1lBQ3ZCLHFuQkFBd0M7WUFDeEMsU0FBUyxFQUFFLENBQUMsb0JBQW9CLENBQUMsbUJBQWlCLENBQUMsQ0FBQztTQUN2RCxDQUFDO09BQ1csaUJBQWlCLENBdUM3QjtJQUFELHdCQUFDO0NBQUEsQUF2Q0QsQ0FBdUMsY0FBYyxHQXVDcEQ7U0F2Q1ksaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgQWZ0ZXJWaWV3SW5pdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uSW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBwcm92aWRlVmFsdWVBY2Nlc3NvciB9IGZyb20gXCJAbnV2ZW0vYW5ndWxhci1iYXNlXCI7XG5pbXBvcnQgeyBGaWVsZENvbXBvbmVudCB9IGZyb20gXCIuLi9maWVsZC5jb21wb25lbnRcIjtcbmltcG9ydCB7IENydWRTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2NydWQtc2VydmljZS5zZXJ2aWNlXCI7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiBcIltuRHJvcGRvd25dXCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9kcm9wZG93bi5jb21wb25lbnQuaHRtbFwiLFxuICAgIHByb3ZpZGVyczogW3Byb3ZpZGVWYWx1ZUFjY2Vzc29yKERyb3Bkb3duQ29tcG9uZW50KV0sXG59KVxuZXhwb3J0IGNsYXNzIERyb3Bkb3duQ29tcG9uZW50IGV4dGVuZHMgRmllbGRDb21wb25lbnQ8YW55PiBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uSW5pdCB7XG5cbiAgICBASW5wdXQoKSBvcHRpb25MYWJlbDogc3RyaW5nO1xuXG4gICAgQElucHV0KCkgdmlydHVhbFNjcm9sbCA9IGZhbHNlO1xuXG4gICAgQElucHV0KCkgZmlsdGVyID0gZmFsc2U7XG5cbiAgICBASW5wdXQoKSBpdGVtU2l6ZSA9IDMwO1xuXG4gICAgQElucHV0KCkgc2VydmljZTogQ3J1ZFNlcnZpY2U8YW55LCBhbnk+O1xuXG4gICAgQElucHV0KCkgb3B0aW9uczogYW55W10gPSBbXTtcblxuICAgIEBPdXRwdXQoKSBvbkNoYW5nZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICBzdXBlci5uZ09uSW5pdCgpO1xuXG4gICAgICAgIGlmICh0aGlzLnNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VydmljZS5maW5kQWxsKG51bGwpLnN1YnNjcmliZShkYXRhID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBkYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNoYW5nZUV2ZW50KGV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMub25DaGFuZ2UuZW1pdChldmVudCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG91dGVyVG9Jbm5lcih2YWx1ZTogYW55KTogYW55IHtcbiAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlLmlkKSB7XG4gICAgICAgICAgICB0aGlzLnNlcnZpY2UuZmluZCh2YWx1ZS5pZCkuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtQ29udHJvbC5zZXRWYWx1ZShkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbn1cbiJdfQ==