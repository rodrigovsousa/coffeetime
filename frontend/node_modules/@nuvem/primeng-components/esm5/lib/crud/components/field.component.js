import { __decorate, __extends } from "tslib";
import { Injector, Input, OnInit, ViewChild, AfterViewInit, ElementRef, Output, EventEmitter, Directive } from "@angular/core";
import { WrappedFormControlSuperclass } from "@nuvem/angular-base";
import { ControlContainer } from "@angular/forms";
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/forms';

var _c0 = ["input"];
var FieldComponent = /** @class */ (function (_super) {
    __extends(FieldComponent, _super);
    function FieldComponent(controlContainer, injector) {
        var _this = _super.call(this, injector) || this;
        _this.controlContainer = controlContainer;
        _this.injector = injector;
        _this.onBlur = new EventEmitter();
        _this.onSelect = new EventEmitter();
        _this.onFocus = new EventEmitter();
        return _this;
    }
    Object.defineProperty(FieldComponent.prototype, "name", {
        get: function () {
            return this._name ? this._name : this.formControlName;
        },
        set: function (value) {
            this._name = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FieldComponent.prototype, "label", {
        get: function () {
            return this.required ? this._label + "*" : this._label;
        },
        set: function (value) {
            this._label = value;
        },
        enumerable: true,
        configurable: true
    });
    FieldComponent.prototype.ngOnInit = function () {
        this.setValidators();
        this.setRequired();
    };
    FieldComponent.prototype.setRequired = function () {
        if (this.required) {
            if (this.input instanceof ElementRef) {
                this.input.nativeElement.required = true;
            }
            else {
                this.input.required = true;
            }
        }
    };
    FieldComponent.prototype.setElementRefAttr = function (attr, value) {
        if (value && this.input instanceof ElementRef) {
            this.input.nativeElement[attr] = value;
        }
    };
    FieldComponent.prototype.setFormControlValidators = function () {
        if (this.controlContainer && this.formControlName) {
            var validator = this.controlContainer.control.get(this.formControlName).validator;
            if (validator) {
                this.formControl.setValidators(validator);
            }
        }
    };
    FieldComponent.prototype.setValidators = function () {
        if (this.controlContainer && this.formControlName) {
            var validator = this.controlContainer.control.get(this.formControlName).validator;
            if (validator) {
                this.formControl.setValidators(validator);
            }
        }
    };
    FieldComponent.prototype.ngAfterViewInit = function () {
        for (var i in this.extraParams) {
            this.input[i] = this.extraParams[i];
        }
    };
    FieldComponent.prototype.onBlurEvent = function (event) {
        this.onBlur.emit(event);
    };
    FieldComponent.prototype.onSelectEvent = function (event) {
        this.onSelect.emit(event);
    };
    FieldComponent.prototype.onFocusEvent = function (event) {
        this.onFocus.emit(event);
    };
    FieldComponent.ctorParameters = function () { return [
        { type: ControlContainer },
        { type: Injector }
    ]; };
    __decorate([
        Input()
    ], FieldComponent.prototype, "form", void 0);
    __decorate([
        Input()
    ], FieldComponent.prototype, "formControlName", void 0);
    __decorate([
        Input()
    ], FieldComponent.prototype, "extraParams", void 0);
    __decorate([
        Input()
    ], FieldComponent.prototype, "required", void 0);
    __decorate([
        Output()
    ], FieldComponent.prototype, "onBlur", void 0);
    __decorate([
        Output()
    ], FieldComponent.prototype, "onSelect", void 0);
    __decorate([
        Output()
    ], FieldComponent.prototype, "onFocus", void 0);
    __decorate([
        ViewChild("input", { static: false })
    ], FieldComponent.prototype, "input", void 0);
    __decorate([
        Input()
    ], FieldComponent.prototype, "name", null);
    __decorate([
        Input()
    ], FieldComponent.prototype, "label", null);
FieldComponent.ɵfac = function FieldComponent_Factory(t) { return new (t || FieldComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ControlContainer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector)); };
FieldComponent.ɵdir = ɵngcc0.ɵɵdefineDirective({ type: FieldComponent, selectors: [["", "nField", ""]], viewQuery: function FieldComponent_Query(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵviewQuery(_c0, true);
    } if (rf & 2) {
        var _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);
    } }, inputs: { name: "name", label: "label", form: "form", formControlName: "formControlName", extraParams: "extraParams", required: "required" }, outputs: { onBlur: "onBlur", onSelect: "onSelect", onFocus: "onFocus" }, features: [ɵngcc0.ɵɵInheritDefinitionFeature] });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FieldComponent, [{
        type: Directive,
        args: [{
                selector: "[nField]"
            }]
    }], function () { return [{ type: ɵngcc1.ControlContainer }, { type: ɵngcc0.Injector }]; }, { name: [{
            type: Input
        }], label: [{
            type: Input
        }], form: [{
            type: Input
        }], formControlName: [{
            type: Input
        }], extraParams: [{
            type: Input
        }], required: [{
            type: Input
        }], onBlur: [{
            type: Output
        }], onSelect: [{
            type: Output
        }], onFocus: [{
            type: Output
        }], input: [{
            type: ViewChild,
            args: ["input", { static: false }]
        }] }); })();
    return FieldComponent;
}(WrappedFormControlSuperclass));
export { FieldComponent };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmllbGQuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJuZzovQG51dmVtL3ByaW1lbmctY29tcG9uZW50cy9saWIvY3J1ZC9jb21wb25lbnRzL2ZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9ILE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ25FLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7OztBQUtsRDtBQUF3RCxJQUM1QyxrQ0FBa0Q7QUFDOUQsSUF3Q0ksd0JBQ1ksZ0JBQWtDLEVBQ2xDLFFBQWtCO0FBQ2xDLFFBSEksWUFHSSxrQkFBTSxRQUFRLENBQUMsU0FDbEI7QUFDTCxRQUpnQixzQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO0FBQUMsUUFDbkMsY0FBUSxHQUFSLFFBQVEsQ0FBVTtBQUFDLFFBaENyQixZQUFNLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7QUFDbEUsUUFDYyxjQUFRLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7QUFDcEUsUUFDYyxhQUFPLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7QUFDbkU7QUFDcUIsSUE0QmpCLENBQUM7QUFDTCxJQXZCSSxzQkFBSSxnQ0FBSTtBQUFJLGFBQVo7QUFBYyxZQUNWLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztBQUM5RCxRQUFJLENBQUM7QUFFTCxhQUNJLFVBQVMsS0FBYTtBQUMxQixZQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQzNCLFFBQUksQ0FB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LCBWaWV3Q2hpbGQsIEFmdGVyVmlld0luaXQsIEVsZW1lbnRSZWYsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBEaXJlY3RpdmUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgV3JhcHBlZEZvcm1Db250cm9sU3VwZXJjbGFzcyB9IGZyb20gXCJAbnV2ZW0vYW5ndWxhci1iYXNlXCI7XG5pbXBvcnQgeyBDb250cm9sQ29udGFpbmVyIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiBcIltuRmllbGRdXCJcbn0pXG5leHBvcnQgY2xhc3MgRmllbGRDb21wb25lbnQ8T3V0ZXJUeXBlLCBJbm5lclR5cGUgPSBPdXRlclR5cGU+XG4gICAgZXh0ZW5kcyBXcmFwcGVkRm9ybUNvbnRyb2xTdXBlcmNsYXNzPE91dGVyVHlwZSwgSW5uZXJUeXBlPlxuICAgIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcblxuICAgIEBJbnB1dCgpIGZvcm06IHN0cmluZztcblxuICAgIEBJbnB1dCgpIGZvcm1Db250cm9sTmFtZTogc3RyaW5nO1xuXG4gICAgQElucHV0KCkgZXh0cmFQYXJhbXM6IGFueTtcblxuICAgIEBJbnB1dCgpIHJlcXVpcmVkOiBib29sZWFuO1xuXG4gICAgQE91dHB1dCgpIG9uQmx1cjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIEBPdXRwdXQoKSBvblNlbGVjdDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIEBPdXRwdXQoKSBvbkZvY3VzOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgQFZpZXdDaGlsZChcImlucHV0XCIsIHsgc3RhdGljOiBmYWxzZSB9KSBpbnB1dDogYW55O1xuXG4gICAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xuXG4gICAgcHJpdmF0ZSBfbGFiZWw6IHN0cmluZztcblxuICAgIGdldCBuYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lID8gdGhpcy5fbmFtZSA6IHRoaXMuZm9ybUNvbnRyb2xOYW1lO1xuICAgIH1cblxuICAgIEBJbnB1dCgpXG4gICAgc2V0IG5hbWUodmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGxhYmVsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVpcmVkID8gYCR7dGhpcy5fbGFiZWx9KmAgOiB0aGlzLl9sYWJlbDtcbiAgICB9XG5cbiAgICBASW5wdXQoKVxuICAgIHNldCBsYWJlbCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2xhYmVsID0gdmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY29udHJvbENvbnRhaW5lcjogQ29udHJvbENvbnRhaW5lcixcbiAgICAgICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHtcbiAgICAgICAgc3VwZXIoaW5qZWN0b3IpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnNldFZhbGlkYXRvcnMoKTtcbiAgICAgICAgdGhpcy5zZXRSZXF1aXJlZCgpO1xuICAgIH1cblxuICAgIHNldFJlcXVpcmVkKCkge1xuICAgICAgICBpZiAodGhpcy5yZXF1aXJlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXQgaW5zdGFuY2VvZiBFbGVtZW50UmVmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFbGVtZW50UmVmQXR0cihhdHRyOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmIHRoaXMuaW5wdXQgaW5zdGFuY2VvZiBFbGVtZW50UmVmKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnRbYXR0cl0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEZvcm1Db250cm9sVmFsaWRhdG9ycygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udHJvbENvbnRhaW5lciAmJiB0aGlzLmZvcm1Db250cm9sTmFtZSkge1xuICAgICAgICAgICAgbGV0IHZhbGlkYXRvciA9IHRoaXMuY29udHJvbENvbnRhaW5lci5jb250cm9sLmdldCh0aGlzLmZvcm1Db250cm9sTmFtZSkudmFsaWRhdG9yO1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybUNvbnRyb2wuc2V0VmFsaWRhdG9ycyh2YWxpZGF0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBzZXRWYWxpZGF0b3JzKCkge1xuICAgICAgICBpZiAodGhpcy5jb250cm9sQ29udGFpbmVyICYmIHRoaXMuZm9ybUNvbnRyb2xOYW1lKSB7XG4gICAgICAgICAgICBsZXQgdmFsaWRhdG9yID0gdGhpcy5jb250cm9sQ29udGFpbmVyLmNvbnRyb2wuZ2V0KHRoaXMuZm9ybUNvbnRyb2xOYW1lKS52YWxpZGF0b3I7XG4gICAgICAgICAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtQ29udHJvbC5zZXRWYWxpZGF0b3JzKHZhbGlkYXRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5leHRyYVBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFtpXSA9IHRoaXMuZXh0cmFQYXJhbXNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkJsdXJFdmVudChldmVudCkge1xuICAgICAgICB0aGlzLm9uQmx1ci5lbWl0KGV2ZW50KTtcbiAgICB9XG5cbiAgICBvblNlbGVjdEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMub25TZWxlY3QuZW1pdChldmVudCk7XG4gICAgfVxuXG4gICAgb25Gb2N1c0V2ZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMub25Gb2N1cy5lbWl0KGV2ZW50KTtcbiAgICB9XG59XG4iXX0=