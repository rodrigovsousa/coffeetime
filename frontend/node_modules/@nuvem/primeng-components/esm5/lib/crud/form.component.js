import { __decorate, __param } from "tslib";
import { Component, Inject, Input, Output, EventEmitter } from "@angular/core";
import { CRUD_SERVICE } from "./crud-service.service";
import { Router, ActivatedRoute } from "@angular/router";
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/router';
import * as ɵngcc2 from '@angular/forms';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from 'primeng';

function FormComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 2);
    ɵngcc0.ɵɵelement(1, "button", 3);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    var ctx_r955 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("label", ctx_r955.saveLabel)("disabled", ctx_r955.form.disabled || ctx_r955.form.invalid);
} }
var _c0 = ["*", [["", "nButton", ""]]];
var _c1 = ["*", "[nButton]"];
var FormComponent = /** @class */ (function () {
    function FormComponent(crudService, activatedRoute, router) {
        this.crudService = crudService;
        this.activatedRoute = activatedRoute;
        this.router = router;
        this.action = "save";
        this.saveLabel = "Salvar";
        this.disableSave = false;
        this.save = new EventEmitter();
        this.reset = new EventEmitter();
    }
    FormComponent.prototype.ngOnInit = function () {
        if (this.service) {
            this.crudService = this.service;
        }
    };
    FormComponent.prototype.submit = function () {
        var _this = this;
        if (this.save.observers.length) {
            this.save.emit(this.form.value);
        }
        else {
            this.crudService[this.action](this.form.value)
                .subscribe(function () {
                if (_this.route) {
                    _this.router.navigate(_this.route, { relativeTo: _this.activatedRoute });
                }
                else if (_this.reset.observers.length) {
                    _this.reset.emit(_this.form);
                }
                else {
                    _this.form.reset();
                }
            });
        }
    };
    FormComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [CRUD_SERVICE,] }] },
        { type: ActivatedRoute },
        { type: Router }
    ]; };
    __decorate([
        Input()
    ], FormComponent.prototype, "form", void 0);
    __decorate([
        Input()
    ], FormComponent.prototype, "route", void 0);
    __decorate([
        Input()
    ], FormComponent.prototype, "action", void 0);
    __decorate([
        Input()
    ], FormComponent.prototype, "saveLabel", void 0);
    __decorate([
        Input()
    ], FormComponent.prototype, "service", void 0);
    __decorate([
        Input()
    ], FormComponent.prototype, "disableSave", void 0);
    __decorate([
        Output()
    ], FormComponent.prototype, "save", void 0);
    __decorate([
        Output()
    ], FormComponent.prototype, "reset", void 0);
    FormComponent = __decorate([ __param(0, Inject(CRUD_SERVICE))
    ], FormComponent);
FormComponent.ɵfac = function FormComponent_Factory(t) { return new (t || FormComponent)(ɵngcc0.ɵɵdirectiveInject(CRUD_SERVICE), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Router)); };
FormComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: FormComponent, selectors: [["nForm"]], inputs: { action: "action", saveLabel: "saveLabel", disableSave: "disableSave", form: "form", route: "route", service: "service" }, outputs: { save: "save", reset: "reset" }, ngContentSelectors: _c1, decls: 5, vars: 1, consts: [[1, "ui-g", "form-group", 3, "submit"], ["class", "ui-g-12 ui-lg-2 ui-md-4 ui-sm-12", 4, "ngIf"], [1, "ui-g-12", "ui-lg-2", "ui-md-4", "ui-sm-12"], ["pButton", "", "type", "submit", 3, "label", "disabled"]], template: function FormComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c0);
        ɵngcc0.ɵɵelementStart(0, "div");
        ɵngcc0.ɵɵelementStart(1, "form", 0);
        ɵngcc0.ɵɵlistener("submit", function FormComponent_Template_form_submit_1_listener() { return ctx.submit(); });
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵtemplate(3, FormComponent_div_3_Template, 2, 2, "div", 1);
        ɵngcc0.ɵɵprojection(4, 1);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(3);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.disableSave);
    } }, directives: [ɵngcc2.ɵangular_packages_forms_forms_y, ɵngcc2.NgControlStatusGroup, ɵngcc2.NgForm, ɵngcc3.NgIf, ɵngcc4.ButtonDirective], encapsulation: 2 });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(FormComponent, [{
        type: Component,
        args: [{
                selector: 'nForm',
                template: "<div>\n    <form (submit)=\"submit()\" class=\"ui-g form-group\">\n        <ng-content></ng-content>\n        <div class=\"ui-g-12 ui-lg-2 ui-md-4 ui-sm-12\" *ngIf=\"!disableSave\">\n            <button pButton type=\"submit\" [label]=\"saveLabel\" [disabled]=\"form.disabled || form.invalid\"></button>\n        </div>\n        <ng-content select=\"[nButton]\"></ng-content>\n    </form>\n</div>"
            }]
    }], function () { return [{ type: undefined, decorators: [{
                type: Inject,
                args: [CRUD_SERVICE]
            }] }, { type: ɵngcc1.ActivatedRoute }, { type: ɵngcc1.Router }]; }, { action: [{
            type: Input
        }], saveLabel: [{
            type: Input
        }], disableSave: [{
            type: Input
        }], save: [{
            type: Output
        }], reset: [{
            type: Output
        }], form: [{
            type: Input
        }], route: [{
            type: Input
        }], service: [{
            type: Input
        }] }); })();
    return FormComponent;
}());
export { FormComponent };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIm5nOi9AbnV2ZW0vcHJpbWVuZy1jb21wb25lbnRzL2xpYi9jcnVkL2Zvcm0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV2RixPQUFPLEVBQWUsWUFBWSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDbkUsT0FBTyxFQUFFLE1BQU0sRUFBRSxjQUFjLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTXpEO0FBRUMsSUFlRyx1QkFFWSxXQUFrQyxFQUNsQyxjQUE4QixFQUM5QixNQUFjO0FBQzNCLFFBSGEsZ0JBQVcsR0FBWCxXQUFXLENBQXVCO0FBQUMsUUFDbkMsbUJBQWMsR0FBZCxjQUFjLENBQWdCO0FBQUMsUUFDL0IsV0FBTSxHQUFOLE1BQU0sQ0FBUTtBQUM5QixRQWhCYSxXQUFNLEdBQVcsTUFBTSxDQUFDO0FBQ3JDLFFBQ2EsY0FBUyxHQUFXLFFBQVEsQ0FBQztBQUMxQyxRQUdhLGdCQUFXLEdBQVksS0FBSyxDQUFDO0FBQzFDLFFBQ2MsU0FBSSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO0FBQ2hFLFFBQ2MsVUFBSyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO0FBQ2pFLElBS08sQ0FBQztBQUNSLElBQ0ksZ0NBQVEsR0FBUjtBQUFjLFFBQ1YsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO0FBQzFCLFlBQVksSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQzVDLFNBQVM7QUFDVCxJQUFJLENBQUM7QUFFTCxJQUFJLDhCQUFNLEdBQU47QUFDRCxRQURDLGlCQWVDO0FBQ0wsUUFmUSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRTtBQUN4QyxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDNUMsU0FBUztBQUFDLGFBQUs7QUFDZixZQUFZLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0FBQzFELGlCQUFhLFNBQVMsQ0FBQztBQUNqQixnQkFBVSxJQUFJLEtBQUksQ0FBQyxLQUFLLEVBQUU7QUFDaEMsb0JBQW9CLEtBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsS0FBSSxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUM7QUFDMUYsaUJBQWlCO0FBQUMscUJBQUssSUFBSSxLQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUU7QUFDeEQsb0JBQW9CLEtBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQyxpQkFBaUI7QUFBQyxxQkFBSztBQUN2QixvQkFBb0IsS0FBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN0QyxpQkFBaUI7QUFDakIsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUNmLFNBQVM7QUFDVCxJQUFJLENBQUM7QUFFTDtBQUN3RCxnREE5Qi9DLE1BQU0sU0FBQyxZQUFZO0FBQ3JCLGdCQUN5QixjQUFjO0FBQzVDLGdCQUFzQixNQUFNO0FBQzVCO0FBRUEsSUF0Qlc7QUFBYSxRQUFyQixLQUFLLEVBQUU7QUFBQywrQ0FBZ0I7QUFFN0IsSUFBYTtBQUVaLFFBRkksS0FBSyxFQUFFO0FBQUMsZ0RBQVU7QUFFdkIsSUFBYTtBQUFhLFFBQXJCLEtBQUssRUFBRTtBQUFDLGlEQUF3QjtBQUVyQyxJQUFhO0FBQWEsUUFBckIsS0FBSyxFQUFFO0FBQUMsb0RBQTZCO0FBRTFDLElBQWE7QUFBYSxRQUFyQixLQUFLLEVBQUU7QUFBQyxrREFBK0I7QUFFNUMsSUFBYTtBQUFhLFFBQXJCLEtBQUssRUFBRTtBQUFDLHNEQUE2QjtBQUUxQyxJQUFjO0FBQWEsUUFBdEIsTUFBTSxFQUFFO0FBQUMsK0NBQWtEO0FBRWhFLElBQWM7QUFBYSxRQUF0QixNQUFNLEVBQUU7QUFBQyxnREFBbUQ7QUFDaEUsSUFqQlksYUFBYSx3QkFKekIsU0FBUyxDQUFDLGNBQ1AsakNBR0ksQ0FrQkMsV0FBQSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUE7T0FyQmpCLEVBQUUsT0FBTyxoQkFzQnJCLE9BbkJhLGFBQWEsQ0ErQ3pCO09BakRHO2dNQUFvQyxVQUN2QyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBaURGO0FBQUMsSUFERCxvQkFBQztBQUNBLENBREEsQUEvQ0QsSUErQ0M7QUFDRCxTQWhEYSxhQUFhO0FBQUkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5qZWN0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRm9ybUdyb3VwIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XG5pbXBvcnQgeyBDcnVkU2VydmljZSwgQ1JVRF9TRVJWSUNFIH0gZnJvbSBcIi4vY3J1ZC1zZXJ2aWNlLnNlcnZpY2VcIjtcbmltcG9ydCB7IFJvdXRlciwgQWN0aXZhdGVkUm91dGUgfSBmcm9tIFwiQGFuZ3VsYXIvcm91dGVyXCI7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbkZvcm0nLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9mb3JtLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBGb3JtQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIEBJbnB1dCgpIGZvcm06IEZvcm1Hcm91cDtcblxuICAgIEBJbnB1dCgpIHJvdXRlOiBbXTtcblxuICAgIEBJbnB1dCgpIGFjdGlvbjogc3RyaW5nID0gXCJzYXZlXCI7XG5cbiAgICBASW5wdXQoKSBzYXZlTGFiZWw6IHN0cmluZyA9IFwiU2FsdmFyXCI7XG5cbiAgICBASW5wdXQoKSBzZXJ2aWNlOiBDcnVkU2VydmljZTxhbnksIGFueT47XG5cbiAgICBASW5wdXQoKSBkaXNhYmxlU2F2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQE91dHB1dCgpIHNhdmU6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICBAT3V0cHV0KCkgcmVzZXQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIEBJbmplY3QoQ1JVRF9TRVJWSUNFKVxuICAgICAgICBwcml2YXRlIGNydWRTZXJ2aWNlOiBDcnVkU2VydmljZTxhbnksIGFueT4sXG4gICAgICAgIHByaXZhdGUgYWN0aXZhdGVkUm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgICAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyXG4gICAgKSB7fVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuY3J1ZFNlcnZpY2UgPSB0aGlzLnNlcnZpY2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdWJtaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNhdmUub2JzZXJ2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zYXZlLmVtaXQodGhpcy5mb3JtLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3J1ZFNlcnZpY2VbdGhpcy5hY3Rpb25dKHRoaXMuZm9ybS52YWx1ZSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKHRoaXMucm91dGUsIHsgcmVsYXRpdmVUbzogdGhpcy5hY3RpdmF0ZWRSb3V0ZSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVzZXQub2JzZXJ2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0LmVtaXQodGhpcy5mb3JtKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIl19