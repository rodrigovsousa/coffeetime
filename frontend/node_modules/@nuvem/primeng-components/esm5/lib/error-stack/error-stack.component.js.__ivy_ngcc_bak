import { __decorate, __read, __spread } from "tslib";
import { Component, Input } from '@angular/core';
import { ErrorStackService, NamedErrorType } from '@nuvem/angular-base';
/**
 * Class ErrorStackComponent
 * @class
 */
var ErrorStackComponent = /** @class */ (function () {
    /**
     * constructor method
     * @constructor
     * @param {ErrorStackService} errorStack
     */
    function ErrorStackComponent(errorStack) {
        this.errorStack = errorStack;
        /**
         * title property
         * @type {string}
         */
        this.title = 'Error Stack';
        /**
         * errors property
         * @type {NamedErrorType}
         */
        this.errors = [];
    }
    /**
     * ngOnInit method
     * @returns void
     */
    ErrorStackComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.errorSubscription = this.errorStack.errors.subscribe(function (error) {
            _this.errors = __spread([error], _this.errors);
        });
    };
    /**
     * ngOnDestroy method
     * @returns void
     */
    ErrorStackComponent.prototype.ngOnDestroy = function () {
        this.errorSubscription.unsubscribe();
    };
    ErrorStackComponent.ctorParameters = function () { return [
        { type: ErrorStackService }
    ]; };
    __decorate([
        Input()
    ], ErrorStackComponent.prototype, "title", void 0);
    __decorate([
        Input()
    ], ErrorStackComponent.prototype, "template", void 0);
    ErrorStackComponent = __decorate([
        Component({
            selector: 'basis-error-stack',
            template: "<ng-template #defaultTemplate>\n    <div class=\"ui-g\">\n        <div class=\"ui-g-12\">\n            <div class=\"card no-margin\">\n                <h1>{{ title }}</h1>\n                <p-table [value]=\"errors\" [paginator]=\"false\" [rows]=\"5\" first=\"0\">\n                    <ng-template pTemplate=\"header\">\n                        <tr>\n                            <th style=\"width: 20%; text-align: center\">Data</th>\n                            <th style=\"width: 20%; text-align: center\">C\u00F3digo de identifica\u00E7\u00E3o</th>\n                            <th>Mensagem</th>\n                            <th style=\"width: 10%; text-align: center\">A\u00E7\u00E3o</th>\n                        </tr>\n                    </ng-template>\n                    <ng-template pTemplate=\"body\" let-error>\n                        <tr>\n                            <td style=\"width: 20%; text-align: center\">{{error.createdAt|date: 'dd/MM/y H:mm:ss'}}</td>\n                            <td style=\"width: 20%; text-align: center\">{{error.correlationId || 'Indispon\u00EDvel'}}</td>\n                            <td>{{error.message}}</td>\n                            <td style=\"width: 10%; text-align: center\">\n                                <button pButton type=\"button\" pTooltip=\"Copiar erro para \u00E1rea de transfer\u00EAncia\" tooltipPosition=\"left\" class=\"ui-button-primary\" icon=\"ui-icon-content-copy\" [clipboard]=\"error.fullMessage\"></button>\n                            </td>\n                        </tr>\n                    </ng-template>\n                    <ng-template pTemplate=\"emptymessage\" let-columns>\n                        <tr>\n                            <td colspan=\"4\">\n                                Nenhum erro foi registrado at\u00E9 o momento.\n                            </td>\n                        </tr>\n                    </ng-template>\n                </p-table>\n            </div>\n        </div>\n    </div>\n</ng-template>\n<ng-container *ngTemplateOutlet=\"template? template: defaultTemplate\"></ng-container>\n"
        })
    ], ErrorStackComponent);
    return ErrorStackComponent;
}());
export { ErrorStackComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3Itc3RhY2suY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG51dmVtL3ByaW1lbmctY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9lcnJvci1zdGFjay9lcnJvci1zdGFjay5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXFCLEtBQUssRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUVqRixPQUFPLEVBQUUsaUJBQWlCLEVBQUUsY0FBYyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFJeEU7OztHQUdHO0FBS0g7SUEwQkk7Ozs7T0FJRztJQUNILDZCQUFvQixVQUE2QjtRQUE3QixlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQTdCakQ7OztXQUdHO1FBQ00sVUFBSyxHQUFXLGFBQWEsQ0FBQztRQVF2Qzs7O1dBR0c7UUFDSCxXQUFNLEdBQXFCLEVBQUUsQ0FBQztJQWF1QixDQUFDO0lBRXREOzs7T0FHRztJQUNILHNDQUFRLEdBQVI7UUFBQSxpQkFJQztRQUhHLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBQyxLQUFxQjtZQUM1RSxLQUFJLENBQUMsTUFBTSxhQUFJLEtBQUssR0FBSyxLQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gseUNBQVcsR0FBWDtRQUNJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUN6QyxDQUFDOztnQkFsQitCLGlCQUFpQjs7SUF6QnhDO1FBQVIsS0FBSyxFQUFFO3NEQUErQjtJQU05QjtRQUFSLEtBQUssRUFBRTt5REFBNEI7SUFaM0IsbUJBQW1CO1FBSi9CLFNBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsdWtFQUEyQztTQUM5QyxDQUFDO09BQ1csbUJBQW1CLENBa0QvQjtJQUFELDBCQUFDO0NBQUEsQUFsREQsSUFrREM7U0FsRFksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uRGVzdHJveSwgSW5wdXQsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEVycm9yU3RhY2tTZXJ2aWNlLCBOYW1lZEVycm9yVHlwZSB9IGZyb20gJ0BudXZlbS9hbmd1bGFyLWJhc2UnO1xuXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcblxuLyoqXG4gKiBDbGFzcyBFcnJvclN0YWNrQ29tcG9uZW50XG4gKiBAY2xhc3NcbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdiYXNpcy1lcnJvci1zdGFjaycsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Vycm9yLXN0YWNrLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBFcnJvclN0YWNrQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuXG4gICAgLyoqXG4gICAgICogdGl0bGUgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmcgPSAnRXJyb3IgU3RhY2snO1xuXG4gICAgLyoqXG4gICAgICogdGVtcGxhdGUgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7VGVtcGxhdGVSZWZ9XG4gICAgICovXG4gICAgQElucHV0KCkgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICAvKipcbiAgICAgKiBlcnJvcnMgcHJvcGVydHlcbiAgICAgKiBAdHlwZSB7TmFtZWRFcnJvclR5cGV9XG4gICAgICovXG4gICAgZXJyb3JzOiBOYW1lZEVycm9yVHlwZVtdID0gW107XG5cbiAgICAvKipcbiAgICAgKiBlcnJvclN1YnNjcmlwdGlvbiBwcm9wZXJ0eVxuICAgICAqIEB0eXBlIHtTdWJzY3JpcHRpb259XG4gICAgICovXG4gICAgcHJpdmF0ZSBlcnJvclN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gICAgLyoqXG4gICAgICogY29uc3RydWN0b3IgbWV0aG9kXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFcnJvclN0YWNrU2VydmljZX0gZXJyb3JTdGFja1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZXJyb3JTdGFjazogRXJyb3JTdGFja1NlcnZpY2UpIHsgfVxuXG4gICAgLyoqXG4gICAgICogbmdPbkluaXQgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaXB0aW9uID0gdGhpcy5lcnJvclN0YWNrLmVycm9ycy5zdWJzY3JpYmUoKGVycm9yOiBOYW1lZEVycm9yVHlwZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBbZXJyb3IsIC4uLnRoaXMuZXJyb3JzXTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbmdPbkRlc3Ryb3kgbWV0aG9kXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxufVxuIl19